(function(){var F=function(){var a=["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),G=Object.prototype.toString,m=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===
b)return 6;if(void 0===b)return 7}var c=a[G.call(b)];return void 0===c?-1:1==c&&isNaN(b)?8:c}}(),t=function(a){return"object"==typeof a&&5===m(a)},A=function(a){return"function"==typeof a},w=function(a){return"string"==typeof a||a===""+a},q=function(){return String.prototype.trim?function(a){return w(a)?a.trim():a}:function(a){return w(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),x=function(){},y=Array.prototype.slice,u=function(a){return a===window||a&&a.document&&a.location&&a.alert&&a.setInterval},
I=function(){var a=function(b,c){if(b===c)return!0;if(null===b||null===c)return!1;if(b!==b&&c!==c)return!0;var d=typeof b,e;if(d==typeof c&&"object"==d)if(t(b)){if(!t(c))return!1;if((d=b.length)==c.length){for(e=0;e<d;e++)if(!a(b[e],c[e]))return!1;return!0}}else{if(10===m(b))return 10===m(c)&&b.getTime()==c.getTime();if(9===m(b)&&9===m(c))return b.toString()==c.toString();if(u(b)||u(c)||t(c))return!1;d={};for(e in b)if("$"!=e.charAt(0)&&!A(b[e])){if(!a(b[e],c[e]))return!1;d[e]=!0}for(e in c)if(!d.hasOwnProperty(e)&&
"$"!=e.charAt(0)&&void 0!==c[e]&&!A(c[e]))return!1;return!0}return!1};return a}(),P=function(){var a=function(b,c){if(u(b))throw Error("Cannot copy window object");if(c){if(b===c)throw Error("Objects are identical");if(t(b))for(var d=c.length=0,e=b.length;d<e;d++)c.push(a(b[d]));else{for(d in c)delete c[d];for(d in b)c[d]=a(b[d])}}else(c=b)&&(t(b)?c=a(b,[]):10===m(b)?c=new Date(b.getTime()):9===m(b)?c=new RegExp(b.source):"object"!=typeof b||3!==m(b)||b.nodeType||(c=a(b,{})));return c};return a}(),
Q=function(a,b,c,d){setTimeout(function(){a.apply(b,c||[])},d||0)},B=function(a){var b=a.stack||Error().stack;if("undefined"!=typeof console&&console.log)Q(function(){console.log(a);b&&console.log(b)});else throw a;},J=function(a){a=m(a);return 3>a&&-1<a},R=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},K=function(){this.events={}};K.prototype={createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new r(a,b));
return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,d){a=a.toLowerCase();var e=this.events;e[a]||(e[a]=new r(a));return e[a].on(b,c,d)},once:function(a,b,c,d){d=d||{};d.limit=1;return this.on(a,b,c,d)},un:function(a,b,c){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},
trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,y.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&
(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,d=-1,e=a.length;++d<e;c=a[d],b[c]=R(this[c],this));this.api=b}return this.api}};var r=function(a,
b){this.name=a;this.listeners=[];this.map={};this.hash=F();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=void 0===b?null:b};r.prototype={getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var d=this.uni,e=b||a;if(e[d]&&!c.allowDupes)return null;var n=++this.lid,s=c.first||!1;e[d]=n;a={fn:a,scope:b,uniScope:e,id:n,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,
prepend:c.prepend};s?this.listeners.unshift(a):this.listeners.push(a);this.map[n]=a;return n},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,d=this.uni,e=this.listeners,n;n=a==parseInt(a)?a:(b||a)[d];if(!n)return!1;for(var s=0,m=e.length;s<m;s++)if(e[s].id==n){c=s;delete e[s].uniScope[d];break}if(-1==c)return!1;e.splice(c,1);delete this.map[n];return!0},hasListener:function(a,b){var c=this.listeners,d;if(a){b=b||a;d=A(a)?b[this.uni]:a;if(!d)return!1;for(var e=
0,n=c.length;e<n;e++)if(c[e].id==d)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,d;c=0;for(d=a.length;c<d;c++)delete a[c].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=y.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;
if(this.suspended||0==a.length)return null;for(var c="all"==b?[]:null,d,e,a="first"==b?[a[0]]:y.call(a);d=a.shift();)if(d&&this.map[d.id]&&(d.count++,!(d.count<d.start))){e=d.fn.apply(d.scope,this._prepareArgs(d,arguments));d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&c.push(e);if("first"==b)return e;"last"==b&&(c=e);if(!1==b&&!1===e)break}if(b)return c}};var z;z=function(){var a=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,b=function(a){if(!w(a))return!0;var b=a.substr(0,1),c=a.length-1;return'"'!=b&&
"'"!=b||a.indexOf(b,1)!=c?!1:a.substring(1,c)},c,d=function(a,p,v,d,g,k){c||(c=new K);var h=F(),f;k&&(this.namespace=k,this.nsGet=k.get);this.origCode=p;w(p)||(d=v,v=p,p=null,f="object");w(a)&&(d=v,v=p,p=a,a=null);p&&a&&(f=a.hasOwnProperty(p)?"attr":"expr");p&&!a&&(f="expr");if(v)c.on(h,v,d||this,{append:[g],allowDupes:!0});if("expr"==f){p=this._processInputPipes(p,a);p=this._processPipes(p,a);if(this.inputPipes||this.pipes)p=n(a,p),f=a.hasOwnProperty(p)?"attr":"expr";if(this.staticValue=b(p))f="static"}this.userData=
g;this.code=p;this.id=h;this.type=f;this.obj=a;"expr"==f&&(this.getterFn=H(p));this.curr=this._getValue()};d.prototype={namespace:null,nsGet:null,staticValue:null,origCode:null,code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,prev:null,unfiltered:null,pipes:null,inputPipes:null,lastSetValue:null,userData:null,_indexArrayItems:function(a){var b="$$"+this.id,c,d,g;if(a)for(c=0,d=a.length;c<d;c++)g=a[c],!g||J(g)||g[b]||(g[b]=F())},_processInputPipes:function(a,b){if(-1==
a.indexOf(">>"))return a;for(var c=0,d=a.length,g=[],k,h,f,e=a;c<d&&-1!=(k=a.indexOf(">>",c));)h=a.charAt(k-1),f=a.charAt(k+2),"\\"!=h&&"'"!=h&&'"'!=h&&"'"!=f&&'"'!=f&&(c=q(a.substring(c,k)).split(":"),e=a.substr(k+2),this._addPipe(g,c,b,this.onInputParamChange)),c=k+2;g.length&&(this.inputPipes=g);return q(e)},_addPipe:function(a,b,c,d){var g=b.shift(),k=null,h=[],f;this.nsGet&&(k=this.nsGet("filter."+g,!0));k||(k=window[g]||c[g]);if(A(k)){g=-1;for(f=b.length;++g<f;h.push(e(c,b[g],d,this,null,this.namespace)));
a.push([k,b,h])}},_processPipes:function(a,b){if(-1==a.indexOf("|"))return a;for(var c=0,d=a.length,g=[],k,h,f,e=!1,m=a;c<d;)if(-1!=(k=a.indexOf("|",c)))h=a.charAt(k-1),f=a.charAt(k+1),"|"!=h&&"'"!=h&&'"'!=h&&"|"!=f&&"'"!=f&&'"'!=f&&(e?(c=q(a.substring(c,k)).split(":"),this._addPipe(g,c,b)):(e=!0,m=q(a.substring(0,k)))),c=k+1;else{e&&(c=q(a.substr(c)).split(":"),this._addPipe(g,c,b,this.onPipeParamChange));break}g.length&&(this.pipes=g);return m},_getValue:function(){var a;switch(this.type){case "static":a=
this.staticValue;break;case "attr":a=this.obj[this.code];break;case "expr":a=this.getterFn(this.obj);void 0===a&&(a="");break;case "object":a=this.obj}t(a)&&(this.inputPipes||this._indexArrayItems(a));J(a)||(a=P(a));this.unfiltered=a;return a=this._runThroughPipes(a,this.pipes)},_runThroughPipes:function(a,b){if(b){var c,d,g,e=b.length,h=this.obj,f,l;for(c=0;c<e;c++){g=b[c][1];d=[];f=-1;for(l=g.length;++f<l;d.push(L(g[f],h)));d.unshift(h);d.unshift(a);a=b[c][0].apply(null,d)}}return a},subscribe:function(a,
b,d){c.on(this.id,a,b,d)},unsubscribe:function(a,b){return c.un(this.id,a,b)},hasPipes:function(){return null!==this.pipes},hasInputPipes:function(){return null!=this.inputPipes},getValue:function(){return this._getValue()},getUnfilteredValue:function(){return this.unfiltered||this.curr},getPrevValue:function(){return null===this.prev?this._getValue():this.prev},getPrescription:function(a,b){var c;b=b||this._getValue();var d=b,g=a.length,e=d.length,h=Array(g+1);c=Array(g+1);var f,l,m,n=0;if(g==e&&
0==g)c=[];else{for(f=0;f<=g;f++)h[f]=Array(e+1),c[f]=Array(e+1),h[f][0]=f,c[f][0]="D";for(f=0;f<=e;f++)h[0][f]=f,c[0][f]="I";for(f=1;f<=g;f++)for(l=1;l<=e;l++)m=I(a[f-1],d[l-1])?0:1,h[f][l-1]<h[f-1][l]&&h[f][l-1]<h[f-1][l-1]+m?(h[f][l]=h[f][l-1]+1,c[f][l]="I"):h[f-1][l]<h[f-1][l-1]+m?(h[f][l]=h[f-1][l]+1,c[f][l]="D"):(h[f][l]=h[f-1][l-1]+m,c[f][l]=1==m?"R":"-");d=[];f=g;l=e;do g=c[f][l],d.push(g),"-"!=g&&n++,"R"==g||"-"==g?(f--,l--):"D"==g?f--:l--;while(0!=f||0!=l);c=d.reverse()}return c},getMovePrescription:function(a,
b,c){var d=c=c||this._getValue();c=this.getPrescription(a,c);var e=[],k,h,f,l={},m,n;k=0;for(h=a.length;k<h;k++)(f=b(a[k]))&&(l[f]=k);m=0;var q={};k=0;for(h=c.length;k<h;k++)a=c[k],"D"!=a&&(f=b(d[m]),void 0!=f&&!0!==q[f]&&void 0!==(n=l[f])?(e.push(n),q[f]=!0):e.push(a),m++);return e},setValue:function(a){var b=this.type;this.lastSetValue=a;a=this._runThroughPipes(a,this.inputPipes);"attr"==b?this.obj[this.code]=a:"expr"==b?(this.setterFn||(this.setterFn=M(this.code)),this.setterFn(this.obj,a)):"object"==
b&&(this.obj=a)},onInputParamChange:function(){this.setValue(this.lastSetValue)},onPipeParamChange:function(){this.check()},check:function(){var a=this._getValue(),b=this.curr;return I(b,a)?!1:(this.curr=a,this.prev=b,c.trigger(this.id,a,b),!0)},checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&(clearInterval(this.itv),
this.itv=null)},unsubscribeAndDestroy:function(a,b){var d=this.id;a&&c.un(d,a,b);return c.hasListener(d)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,b=this.inputPipes,d,e,g,k,h;this.itv&&this.clearInterval();if(a)for(d=-1,e=a.length;++d<e;)for(h=a[d][2],g=-1,k=h.length;++g<k;)h[g].unsubscribeAndDestroy(this.check,this);if(b)for(d=-1,e=b.length;++d<e;)for(h=b[d][2],g=-1,k=h.length;++g<k;)h[g].unsubscribeAndDestroy(this.onInputParamChange,this);this.obj&&delete this.obj.$$watchers[this.origCode];
delete this.id;delete this.curr;delete this.prev;delete this.unfiltered;delete this.obj;delete this.pipes;delete this.inputPipes;delete this.origCode;delete this.code;delete this.getterFn;delete this.setterFn;delete this.lastSetValue;delete this.staticValue;delete this.userData;delete this.namespace;delete this.nsGet;c.destroyEvent(this.id)}};var e=function(a,b,c,e,g,k){b=n(a,q(b));return a?(a.$$watchers||(a.$$watchers={$checkAll:function(){var a,b=0;for(a in this)"$"!=a.charAt(0)&&this[a].check()?
b++:"$"==a.charAt(0)&&this[a]instanceof d&&this[a].check()&&b++;return b},$destroyAll:function(){for(var a in this)if("$"!=a.charAt(0)||this[a]instanceof d)this[a].destroy(),delete this[a]}}),a.$$watchers[b]?a.$$watchers[b].subscribe(c,e,{append:[g],allowDupes:!0}):a.$$watchers[b]=new d(a,b,c,e,g,k),a.$$watchers[b]):new d(a,b,c,e,g,k)},n=function(a,b){if(a&&b){if(a.hasOwnProperty(b))return b;var c;if("."==b.charAt(0)&&(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},m=Function,u=function(a,
b,c,d){for(;c&&!c.$isRoot;)if(c=c.$parent)try{return 4==arguments.length?b.call(null,c,d,x,b):b.call(null,c,x,b)}catch(e){}null!==a&&B(a)},r=function(a,b){return function(){var c=y.call(arguments);c.push(u);c.push(a);c=a.apply(null,c);return b&&void 0===c?(c=y.call(arguments),c.unshift(a),c.unshift(null),u.apply(null,c)):c}},C={},z=0,H=function(b){try{return C[b]?C[b]:(z++,C[b]=r(new m("____","$$interceptor","$$itself","".concat("try {","return ",b.replace(a,"$1____.$3"),";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }")),
!0))}catch(c){return B(c),x}},D={},N=0,M=function(b){try{if(!D[b]){N++;var c=b.replace(a,"$1____.$3");return D[b]=r(new m("____","$$$$","$$interceptor","$$itself","".concat("try {",c," = $$$$",";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____, $$$$); }")))}return D[b]}catch(d){return B(d),x}},E={},O=0,L=function(a,c){var d;return(d=b(a))?d:H(a)(c)},G=function(){1E3<=z&&(C={});1E3<=N&&(D={});1E3<=O&&(E={})};d.create=e;d.unsubscribeAndDestroy=function(a,b,c,d){b=q(b);(a=a.$$watchers)&&
a[b]&&a[b].unsubscribeAndDestroy(c,d)&&delete a[b]};d.normalizeExpr=n;d.prepareCode=function(b){return b.replace(a,"$1____.$3")};d.createGetter=H;d.createSetter=M;d.createFunc=function(b){try{return E[b]?E[b]:(O++,E[b]=r(new m("____","$$interceptor","$$itself","".concat("try {",b.replace(a,"$1____.$3"),";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }"))))}catch(c){return B(c),x}};d.eval=L;d.enableResetCacheInterval=function(){setTimeout(G,1E4)};return d}();MetaphorJs.lib.Watchable=
z;"undefined"!=typeof global?global.MetaphorJs=MetaphorJs:window.MetaphorJs=MetaphorJs})();
